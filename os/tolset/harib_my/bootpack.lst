     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_load_eflags
     7 00000000                                 	EXTERN	_io_cli
     8 00000000                                 	EXTERN	_io_out8
     9 00000000                                 	EXTERN	_io_store_eflags
    10 00000000                                 	EXTERN	_io_hlt
    11 00000000                                 [FILE "bootpack.c"]
    12                                          [SECTION .text]
    13 00000000                                 	GLOBAL	_HariMain
    14 00000000                                 _HariMain:
    15 00000000 55                              	PUSH	EBP
    16 00000001 89 E5                           	MOV	EBP,ESP
    17 00000003 53                              	PUSH	EBX
    18 00000004 31 DB                           	XOR	EBX,EBX
    19 00000006 E8 0000001B                     	CALL	_init_palette
    20 0000000B                                 L6:
    21 0000000B 88 D8                           	MOV	AL,BL
    22 0000000D 83 E0 04                        	AND	EAX,4
    23 00000010 88 83 000A0000                  	MOV	BYTE [655360+EBX],AL
    24 00000016 43                              	INC	EBX
    25 00000017 81 FB 0000F8C0                  	CMP	EBX,63680
    26 0000001D 7E EC                           	JLE	L6
    27 0000001F 5B                              	POP	EBX
    28 00000020 5D                              	POP	EBP
    29 00000021 E9 0000008B                     	JMP	_hlt_loop
    30                                          [SECTION .data]
    31 00000000                                 _table_rgb.0:
    32 00000000 00                              	DB	0
    33 00000001 00                              	DB	0
    34 00000002 00                              	DB	0
    35 00000003 FF                              	DB	-1
    36 00000004 00                              	DB	0
    37 00000005 00                              	DB	0
    38 00000006 00                              	DB	0
    39 00000007 FF                              	DB	-1
    40 00000008 00                              	DB	0
    41 00000009 FF                              	DB	-1
    42 0000000A FF                              	DB	-1
    43 0000000B 00                              	DB	0
    44 0000000C 00                              	DB	0
    45 0000000D 00                              	DB	0
    46 0000000E FF                              	DB	-1
    47 0000000F FF                              	DB	-1
    48 00000010 00                              	DB	0
    49 00000011 FF                              	DB	-1
    50 00000012 00                              	DB	0
    51 00000013 FF                              	DB	-1
    52 00000014 FF                              	DB	-1
    53 00000015 FF                              	DB	-1
    54 00000016 FF                              	DB	-1
    55 00000017 FF                              	DB	-1
    56 00000018 C6                              	DB	-58
    57 00000019 C6                              	DB	-58
    58 0000001A C6                              	DB	-58
    59 0000001B 84                              	DB	-124
    60 0000001C 00                              	DB	0
    61 0000001D 00                              	DB	0
    62 0000001E 00                              	DB	0
    63 0000001F 84                              	DB	-124
    64 00000020 00                              	DB	0
    65 00000021 84                              	DB	-124
    66 00000022 84                              	DB	-124
    67 00000023 00                              	DB	0
    68 00000024 00                              	DB	0
    69 00000025 00                              	DB	0
    70 00000026 84                              	DB	-124
    71 00000027 84                              	DB	-124
    72 00000028 00                              	DB	0
    73 00000029 84                              	DB	-124
    74 0000002A 00                              	DB	0
    75 0000002B 84                              	DB	-124
    76 0000002C 84                              	DB	-124
    77 0000002D 84                              	DB	-124
    78 0000002E 84                              	DB	-124
    79 0000002F 84                              	DB	-124
    80                                          [SECTION .text]
    81 00000026                                 	GLOBAL	_init_palette
    82 00000026                                 _init_palette:
    83 00000026 55                              	PUSH	EBP
    84 00000027 89 E5                           	MOV	EBP,ESP
    85 00000029 68 [00000000]                   	PUSH	_table_rgb.0
    86 0000002E 6A 0F                           	PUSH	15
    87 00000030 6A 00                           	PUSH	0
    88 00000032 E8 00000002                     	CALL	_set_palette
    89 00000037 C9                              	LEAVE
    90 00000038 C3                              	RET
    91 00000039                                 	GLOBAL	_set_palette
    92 00000039                                 _set_palette:
    93 00000039 55                              	PUSH	EBP
    94 0000003A 89 E5                           	MOV	EBP,ESP
    95 0000003C 57                              	PUSH	EDI
    96 0000003D 56                              	PUSH	ESI
    97 0000003E 53                              	PUSH	EBX
    98 0000003F 51                              	PUSH	ECX
    99 00000040 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   100 00000043 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   101 00000046 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   102 00000049 E8 [00000000]                   	CALL	_io_load_eflags
   103 0000004E 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   104 00000051 E8 [00000000]                   	CALL	_io_cli
   105 00000056 53                              	PUSH	EBX
   106 00000057 68 000003C8                     	PUSH	968
   107 0000005C E8 [00000000]                   	CALL	_io_out8
   108 00000061 85 FF                           	TEST	EDI,EDI
   109 00000063 58                              	POP	EAX
   110 00000064 5A                              	POP	EDX
   111 00000065 78 38                           	JS	L17
   112 00000067 8D 5F 01                        	LEA	EBX,DWORD [1+EDI]
   113 0000006A                                 L15:
   114 0000006A 0F BE 06                        	MOVSX	EAX,BYTE [ESI]
   115 0000006D 50                              	PUSH	EAX
   116 0000006E 68 000003C9                     	PUSH	969
   117 00000073 E8 [00000000]                   	CALL	_io_out8
   118 00000078 0F BE 46 01                     	MOVSX	EAX,BYTE [1+ESI]
   119 0000007C 50                              	PUSH	EAX
   120 0000007D 68 000003C9                     	PUSH	969
   121 00000082 E8 [00000000]                   	CALL	_io_out8
   122 00000087 0F BE 46 02                     	MOVSX	EAX,BYTE [2+ESI]
   123 0000008B 50                              	PUSH	EAX
   124 0000008C 83 C6 03                        	ADD	ESI,3
   125 0000008F 68 000003C9                     	PUSH	969
   126 00000094 E8 [00000000]                   	CALL	_io_out8
   127 00000099 83 C4 18                        	ADD	ESP,24
   128 0000009C 4B                              	DEC	EBX
   129 0000009D 75 CB                           	JNE	L15
   130 0000009F                                 L17:
   131 0000009F 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   132 000000A2 89 45 08                        	MOV	DWORD [8+EBP],EAX
   133 000000A5 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   134 000000A8 5B                              	POP	EBX
   135 000000A9 5E                              	POP	ESI
   136 000000AA 5F                              	POP	EDI
   137 000000AB 5D                              	POP	EBP
   138 000000AC E9 [00000000]                   	JMP	_io_store_eflags
   139 000000B1                                 	GLOBAL	_hlt_loop
   140 000000B1                                 _hlt_loop:
   141 000000B1 55                              	PUSH	EBP
   142 000000B2 89 E5                           	MOV	EBP,ESP
   143 000000B4                                 L19:
   144 000000B4 E8 [00000000]                   	CALL	_io_hlt
   145 000000B9 EB F9                           	JMP	L19
